-- CLASSIFICATION TABLE
CREATE TABLE IF NOT EXISTS CLASSIFICATION (
    CLASSIFICATION_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    CLASSIFICATION_NAME VARCHAR(255) UNIQUE,
    CLASSIFICATION_NOTE VARCHAR(255),
    DEFAULT_ID BOOLEAN
);
INSERT INTO CLASSIFICATION (CLASSIFICATION_NAME, CLASSIFICATION_NOTE, DEFAULT_ID) VALUES ('', '', TRUE);

-- MATERIAL TABLE
CREATE TABLE IF NOT EXISTS MATERIAL (
    MATERIAL_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    MATERIAL_NAME VARCHAR(255) UNIQUE,
    MATERIAL_GOLD_PURITY_PERCENT DECIMAL(5, 2),
    DEFAULT_ID BOOLEAN
);
INSERT INTO MATERIAL (MATERIAL_NAME, MATERIAL_GOLD_PURITY_PERCENT, DEFAULT_ID) VALUES ('', 0, TRUE);

-- SET_TYPE TABLE
CREATE TABLE IF NOT EXISTS SET_TYPE (
    SET_TYPE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    SET_TYPE_NAME VARCHAR(255) UNIQUE,
    SET_TYPE_NOTE VARCHAR(255),
    DEFAULT_ID BOOLEAN
    );
INSERT INTO SET_TYPE (SET_TYPE_NAME, SET_TYPE_NOTE, DEFAULT_ID) VALUES ('', '', TRUE);

-- COLOR TABLE
CREATE TABLE IF NOT EXISTS COLOR (
    COLOR_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    COLOR_NAME VARCHAR(255) UNIQUE,
    COLOR_NOTE VARCHAR(255),
    DEFAULT_ID BOOLEAN
);
INSERT INTO COLOR (COLOR_NAME, COLOR_NOTE, DEFAULT_ID) VALUES ('', '', TRUE);

-- STONE_SHAPE TABLE
CREATE TABLE IF NOT EXISTS STONE_SHAPE (
    STONE_SHAPE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    STONE_SHAPE_NAME VARCHAR(255) UNIQUE,
    STONE_SHAPE_NOTE VARCHAR(255)
);
INSERT INTO STONE_SHAPE (STONE_SHAPE_NAME, STONE_SHAPE_NOTE) VALUES ('', '');

-- STONE_TYPE TABLE
CREATE TABLE IF NOT EXISTS STONE_TYPE (
    STONE_TYPE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    STONE_TYPE_NAME VARCHAR(255) UNIQUE,
    STONE_TYPE_NOTE VARCHAR(255)
);
INSERT INTO STONE_TYPE (STONE_TYPE_NAME, STONE_TYPE_NOTE) VALUES ('', '');

-- STONE TABLE
CREATE TABLE IF NOT EXISTS STONE (
    STONE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    STONE_NAME VARCHAR(255) UNIQUE,
    STONE_NOTE VARCHAR(255),
    STONE_WEIGHT DECIMAL(5, 2),
    STONE_PURCHASE_PRICE VARCHAR(255)
);

-- STONE_WORK_GRADE_POLICY TABLE
CREATE TABLE IF NOT EXISTS STONE_WORK_GRADE_POLICY (
    STONE_WORK_GRADE_POLICY_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    STONE_ID BIGINT NOT NULL,
    GRADE VARCHAR(255) NOT NULL,
    LABOR_COST INTEGER,
    CONSTRAINT FK_STONE_WORK_GRADE_POLICY__STONE FOREIGN KEY (STONE_ID) REFERENCES STONE(STONE_ID)
);

-- PRODUCT TABLE
CREATE TABLE IF NOT EXISTS PRODUCT (
    PRODUCT_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    FACTORY_ID BIGINT,
    FACTORY_NAME VARCHAR(255),
    PRODUCT_FACTORY_NAME VARCHAR(255),
    PRODUCT_NAME VARCHAR(255) NOT NULL UNIQUE,
    SET_TYPE_ID BIGINT,
    CLASSIFICATION_ID BIGINT,
    MATERIAL_ID BIGINT,
    STANDARD_WEIGHT DECIMAL(19, 2),
    PRODUCT_NOTE VARCHAR(255),
    PRODUCT_DELETED BOOLEAN DEFAULT FALSE,
    CREATE_DATE TIMESTAMPTZ,
    LAST_MODIFIED_DATE TIMESTAMPTZ,
    CREATED_BY VARCHAR(255),
    LAST_MODIFIED_BY VARCHAR(255),
    CONSTRAINT FK_PRODUCT_SET_TYPE FOREIGN KEY (SET_TYPE_ID) REFERENCES SET_TYPE(SET_TYPE_ID),
    CONSTRAINT FK_PRODUCT_CLASSIFICATION FOREIGN KEY (CLASSIFICATION_ID) REFERENCES CLASSIFICATION(CLASSIFICATION_ID),
    CONSTRAINT FK_PRODUCT_MATERIAL FOREIGN KEY (MATERIAL_ID) REFERENCES MATERIAL(MATERIAL_ID)
);

-- PRODUCT_IMAGE TABLE
CREATE TABLE IF NOT EXISTS PRODUCT_IMAGE (
    IMAGE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    IMAGE_URL VARCHAR(255) NOT NULL,
    IMAGE_NAME VARCHAR(255) NOT NULL,
    IMAGE_ORIGIN_NAME VARCHAR(255) NOT NULL,
    IMAGE_MAIN BOOLEAN NOT NULL,
    PRODUCT_ID BIGINT,
    CREATE_DATE TIMESTAMPTZ,
    LAST_MODIFIED_DATE TIMESTAMPTZ,
    CONSTRAINT FK_PRODUCT_IMAGE_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

-- PRODUCT_STONE TABLE
CREATE TABLE IF NOT EXISTS PRODUCT_STONE (
    PRODUCT_STONE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    PRODUCT_ID BIGINT NOT NULL,
    STONE_ID BIGINT NOT NULL,
    MAIN_STONE BOOLEAN,
    INCLUDE_STONE BOOLEAN,
    STONE_QUANTITY INTEGER,
    PRODUCT_STONE_NOTE VARCHAR(255),
    CONSTRAINT FK_PRODUCT_STONE_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
    CONSTRAINT FK_PRODUCT_STONE_STONE FOREIGN KEY (STONE_ID) REFERENCES STONE(STONE_ID)
);

-- PRODUCT_WORK_GRADE_POLICY_GROUP TABLE
CREATE TABLE IF NOT EXISTS PRODUCT_WORK_GRADE_POLICY_GROUP (
    PRODUCT_WORK_GRADE_POLICY_GROUP_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    PRODUCT_ID BIGINT NOT NULL,
    PRODUCT_PURCHASE_PRICE INTEGER,
    COLOR_ID BIGINT NOT NULL,
    PRODUCT_WORK_GRADE_POLICY_GROUP_DEFAULT BOOLEAN,
    PRODUCT_NOTE VARCHAR(255),
    CONSTRAINT FK_GRADE_POLICY_GROUP_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
    CONSTRAINT FK_GRADE_POLICY_GROUP_COLOR FOREIGN KEY (COLOR_ID) REFERENCES COLOR(COLOR_ID)
);

-- PRODUCT_WORK_GRADE_POLICY TABLE
CREATE TABLE IF NOT EXISTS PRODUCT_WORK_GRADE_POLICY (
    PRODUCT_WORK_GRADE_POLICY_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    GRADE VARCHAR(50) NOT NULL,
    LABOR_COST INT,
    PRODUCT_WORK_GRADE_POLICY_GROUP_ID BIGINT NOT NULL,
    CONSTRAINT FK_GRADE_POLICY_GROUP_ID FOREIGN KEY (PRODUCT_WORK_GRADE_POLICY_GROUP_ID)
    REFERENCES PRODUCT_WORK_GRADE_POLICY_GROUP(PRODUCT_WORK_GRADE_POLICY_GROUP_ID)
);

-- ASSISTANCE_STONE TABLE
CREATE TABLE IF NOT EXISTS ASSISTANCE_STONE (
    ASSISTANCE_STONE_ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    ASSISTANCE_STONE_NAME VARCHAR(255) UNIQUE,
    ASSISTANCE_STONE_NOTE VARCHAR(255),
    ASSISTANCE_STONE_DELETED BOOLEAN DEFAULT FALSE
);

INSERT INTO ASSISTANCE_STONE (ASSISTANCE_STONE_NAME, ASSISTANCE_STONE_NOTE) VALUES ('입없음', '');
INSERT INTO ASSISTANCE_STONE (ASSISTANCE_STONE_NAME, ASSISTANCE_STONE_NOTE) VALUES ('입예정', '');
INSERT INTO ASSISTANCE_STONE (ASSISTANCE_STONE_NAME, ASSISTANCE_STONE_NOTE) VALUES ('랩다이아', '');
INSERT INTO ASSISTANCE_STONE (ASSISTANCE_STONE_NAME, ASSISTANCE_STONE_NOTE) VALUES ('모이사', '');